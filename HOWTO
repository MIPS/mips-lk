=== HOWTO for building the MIPS LK TEE project ===

Updated: Oct 26, 2016.

The following HOWTO file pertains to this repository:

   https://github.com/MIPS/mips-lk.git


Setup
=====

Prerequisites:
- mips-mti-elf toolchain
- qemu-system-mipsel

Setup the environment for MIPS cross-compile.

   export ARCH=mips
   export PATH=/<path_to_toolchain>/bin:$PATH
   export TOOLCHAIN_PREFIX=mips-mti-elf-


Clone the repository and checkout the master branch

   git clone https://github.com/MIPS/mips-lk.git mips-lk


Building and running
====================

To see a list of available projects run

   make list

To build and run a project, run the do-qemumips-malta script from the top-level
directory and use the '-p' flag to specify a project file..

   ./lk/scripts/do-qemumips-malta -p mips-malta-test

The executable is in the build-mips-malta-test directory.


Debugging
=========

The do-qemumips-malta script will pass all flags after '--' to QEMU. Pass -S to
wait for a connection on port tcp:1234 and connect with gdb.

   ./lk/scripts/do-qemumips-malta -p mips-malta-test -- -S

Connect from gdb
   ./mips-mti-elf-gdb
   (gdb) target remote tcp::1234
   (gdb) file /home/ledu/work/mips/mips-lk/build-mips-malta-test/lk.elf
